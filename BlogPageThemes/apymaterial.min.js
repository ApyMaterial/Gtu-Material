
// !function () {
//   function detectDevTool(allow) {
//     if (isNaN(+allow)) allow = 100;
//     var start = +new Date(); // Validation of built-in Object tamper prevention.
//     debugger;
//     // alert("isable debugger");
//     var end = +new Date(); // Validates too.
//     if (isNaN(start) || isNaN(end) || end - start > allow) {
//       // input your code here when devtools detected.

//       document.getElementsByTagName("BODY")[0].innerHTML = "<h1>Disable debugger</h1>";
//       alert("Disable debugger");
//     }
//   }
//   if (window.attachEvent) {
//     if (document.readyState === "complete" || document.readyState === "interactive") {
//       detectDevTool();
//       window.attachEvent('onresize', detectDevTool);
//       window.attachEvent('onmousemove', detectDevTool);
//       window.attachEvent('onfocus', detectDevTool);
//       window.attachEvent('onblur', detectDevTool);
//     } else {
//       setTimeout(argument.callee, 0);
//     }
//   } else {
//     window.addEventListener('load', detectDevTool);
//     window.addEventListener('resize', detectDevTool);
//     window.addEventListener('mousemove', detectDevTool);
//     window.addEventListener('focus', detectDevTool);
//     window.addEventListener('blur', detectDevTool);
//   }
// }();

async function GetPaperSolutionList(){
  let paperSolutionTableBody = document.getElementById("paperSolutionTableBody");
  paperSolutionTableBody.innerHTML=``;
  requestURL = "https://apymaterial.github.io/Gtu-Material/PaperSolutions.json";
    request = new Request(requestURL);
    response = await fetch(request);
    if (response.status == "200") {
      PaperSolutionsList = await response.json();
      let PaperSolutions = PaperSolutionsList.paper_list;
        for(let k of PaperSolutions){
          paperSolutionTableBody.innerHTML += `
          <tr>
    <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
        <div class="flex items-center">
            <div class="ml-4">
                <div class="text-sm font-medium leading-5 text-gray-900">
                    `+ k["Subject_name"] +`
                </div>
            </div>
        </div>
    </td>

    <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
        <div class="text-sm leading-5 text-gray-500"> ` + k["Subject_code"] + `  </div>
    </td>

    <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
        <span
            class="inline-flex px-2 text-xs font-semibold leading-5 text-green-800 bg-green-100 rounded-full">` + k["Year"] + `</span>
    </td>

    <td class="px-6 py-4 text-sm leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 text-2xl">
    <a href="` + k["Url"] + ` " target="_blank">
        <i class="fa fa-eye text-blue-400 text-3xl" aria-hidden="true"></i>
        </a>
    </td>
</tr>
          `
        }

        console.log(paperSolutionTableBody.innerHTML);
    }
}
async function GetSubjectsData(subject, book, paper) {
  let pagediv = document.getElementById("page");
  pagediv.innerHTML = ``;
  for (k of subject) {
    requestURL = "https://apymaterial.github.io/Gtu-Material/" + k + ".json";
    request = new Request(requestURL);
    response = await fetch(request);
    if (response.status == "200") {
      SubjectData = await response.json();

      if (paper == true) {
        pagediv.innerHTML +=
          `
          <div class="border-2 border-gray-700 rounded-lg shadow-inner-lg mt-2 mb-2">
      <div class="subject_name p-2 align-center  text-white text-center font-revert font-semibold text-lg bg-gray-800">
          <h3 title="` +
          SubjectData["subject_name"] +
          `(` +
          SubjectData["subjecet_code"] +
          `)` +
          `" class="mt-2 mb-2  text-white text-center  font-semibold text-lg">` +
          SubjectData["subject_name"] +
          `(` +
          SubjectData["subjecet_code"] +
          `)` +
          `</h3>
      </div> 
      <div class="container mx-auto pb-2">
          <div class="flex flex-wrap -mx-1 overflow-hidden sm:-mx-1 md:-mx-1 lg:-mx-1 xl:-mx-1	" id="` +
          k +
          `"> </div>
      </div>
                `;

        getSubjectPapers(SubjectData["old_paper"], k);
      } else if ((book = true)) {
        if (response.status == "200") {
          pagediv.innerHTML +=
            `
          <div class=" p-2 align-center bg-gradient-to-b from-gray-900 to-gray-600 bg-gradient-to-r text-white text-center font-revert font-semibold text-lg rounded mb-3">
              <h3 title="` +
            SubjectData["subject_name"] +
            `(` +
            SubjectData["subjecet_code"] +
            `)` +
            `" class="mt-2 mb-2  text-white text-center font-revert font-semibold text-lg">` +
            SubjectData["subject_name"] +
            `(` +
            SubjectData["subjecet_code"] +
            `)` +
            `</h3>
          </div> 
          <div class="container mx-auto">
              <div class="flex flex-wrap -mx-2 overflow-hidden sm:-mx-3 md:-mx-2 lg:-mx-2 xl:-mx-1 all_books justify-center	" id="` +
            k +
            `"> </div>
          </div>
                    `;

          getSubjectBooks(SubjectData["Books"], k);
        } else {
          continue;
        }
      }
    }
  }
}
function getSubjectBooks(all_books, subject_code) {
  let BookSection = document.getElementById(subject_code);
  if (all_books.length > 0) {
    for (let i of all_books) {
      
      BookSection.innerHTML +=
        `
<div class="my-2 px-2 w-1/2 overflow-hidden sm:my-3 sm:px-3 sm:w-1/2 md:my-2 md:px-2 md:w-1/2 lg:my-2 lg:px-2 lg:w-1/3 xl:my-1 xl:px-1 xl:w-1/3">
  <div class=" justify-center item">
        <div class="inline-block shadow-inner shadow-blue rounded-xl">
            <div class="m-2">
                <img  class="book-img shadow-md shadow-black p-2 rounded-xl rounded-2xl"
                    src="` +
        i["img"] +
        `" alt="` +
        i["alt_data"] +
        `" />
            </div>
            <div class=" pt-2 m-2">
                <a target="_blank" href="` +
        i["download_link"] +
        `" class="btn shadow-md btn-outline-dark  w-100">Download</a>
            </div>
        </div>
    </div>
</div>
`;
    }
  } else {
    BookSection.innerHTML += `
<div class="my-2 px-2 w-1/2 overflow-hidden sm:my-3 sm:px-3 sm:w-1/2 md:my-2 md:px-2 md:w-1/2 lg:my-2 lg:px-2 lg:w-1/3 xl:my-1 xl:px-1 xl:w-1/3">
  <div class=" justify-center item">
        
            <h3>No Data Avaliable</h3>                
        
    </div>
</div>
`;
  }
}
function getSubjectPapers(all_papers, subject_code) {
  let PaperSection = document.getElementById(subject_code);

  if (all_papers.length > 0) {
    for (let i of all_papers) {
      PaperSection.innerHTML +=
        `
        <div class="my-1 px-1 w-1/3 overflow-hidden sm:my-1 sm:px-1 sm:w-1/3 md:my-1 md:px-1 md:w-1/4 lg:my-1 lg:px-1 lg:w-1/5 xl:my-1 xl:px-1 xl:w-1/5 ">
         <div class="  pt-2 ">
                    <a target="_blank" href="` +
        i["link"] +
        `" class="old-paper-btn btn shadow-md btn-outline-dark  w-100">` +
        i["year"] +
        `</a>
                </div>
        </div>
        </div>
        `;
    }
  } else {
    PaperSection.innerHTML += `
        <div class="">
         <div class=" align-center  pt-2 ">
                    <p>No Papers Avaliable</p>
                </div>
        </div>
        </div>
        `;
  }
}

async function GetSingleSubjectsData(subjectCode) {
  requestURL =
    "https://apymaterial.github.io/Gtu-Material/" + subjectCode + ".json";
  request = new Request(requestURL);
  response = await fetch(request);
  if (response.status == "200") {
    SubjectData = await response.json();

    console.log(SubjectData);
  }
}

document.addEventListener('contextmenu', (e) => {
  e.preventDefault();
}
);
document.onkeydown = function (e) {
  if (event.keyCode == 123) {
    return false;
  }
  if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) {
    return false;
  }
  if (e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) {
    return false;
  }
  if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) {
    return false;
  }
  if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) {
    return false;
  }
}



async function GetSingleSubjectsData(subjectCode) {

  requestURL = "https://apymaterial.github.io/Gtu-Material/" + subjectCode + ".json";
  request = new Request(requestURL);
  response = await fetch(request);

  if (response.status == "200") {
    SubjectData = await response.json();
    console.log(SubjectData.old_paper.length);

    if (SubjectData.syllabus != '') { Syllabus(SubjectData); }
    if (SubjectData.old_paper.length > 0) { OldPapers(SubjectData); }
    if (SubjectData.Books.length > 0) { Books(SubjectData); }
    if (SubjectData.imp_material != '') { ImpMaterial(SubjectData); }
    if (SubjectData.assignments != '') { PrecticalAssignment(SubjectData); }
    if (SubjectData.paper_solution != '') { SubjectPaperSolution(SubjectData); }
    

  }
}


function Syllabus(SubjectData) {

  pagediv.innerHTML += ` <div class="post-header"><div class="post-head"><h1 class="post-title entry-title" itemprop="name">Syllabus </h1></div></div><div class="container"><div class="row"><div class=""><div class="card card-margin"><div class="card-body border-2 "><div class="widget-49"><div class="widget-49-title-wrapper"><div class="widget-49-date-primary"><span class="widget-49-date-day">` + SubjectData.known_as + `</span></div><div class="widget-49-meeting-info"><span class="widget-49-pro-title">` + SubjectData.subject_name + `</span><span class="widget-49-meeting-time">` + SubjectData.subjecet_code + `</span></div></div><a href="` + SubjectData.syllabus + `"
class="btn btn-sm btn-flash-border-primary widget-49-meeting-action">Download</a></div></div></div></div></div></div> `;

}

function OldPapers(SubjectData) {
  pagediv.innerHTML +=
    `
    <div class="border-2 border-gray-700 rounded-lg shadow-inner-lg mt-2 mb-2">
<div class="subject_name p-2 align-center  text-white text-center font-revert font-semibold text-lg bg-gray-800">
    <h3 title="` +
    SubjectData["subject_name"] +
    `(` +
    SubjectData["subjecet_code"] +
    `)` +
    `" class="mt-2 mb-2  text-white text-center  font-semibold text-lg"> Old Papers </h3>
</div> 
<div class="container mx-auto pb-2">
    <div class="flex flex-wrap -mx-1 overflow-hidden sm:-mx-1 md:-mx-1 lg:-mx-1 xl:-mx-1	" id="OldPapers"> </div>
</div>
          `;

  getSubjectPapers(SubjectData["old_paper"], 'OldPapers');
}
function Books(SubjectData) {

  pagediv.innerHTML +=
    `
    <div class="border-2 border-gray-700 rounded-lg shadow-inner-lg mt-2 mb-2">
<div class="subject_name p-2 align-center  text-white text-center font-revert font-semibold text-lg bg-gray-800">
    <h3 title="` +
    SubjectData["subject_name"] +
    `(` +
    SubjectData["subjecet_code"] +
    `)` +
    `" class="mt-2 mb-2  text-white text-center  font-semibold text-lg"> Books </h3>
</div> 
<div class="container mx-auto pb-2">
    <div class="flex flex-wrap -mx-1 overflow-hidden sm:-mx-1 md:-mx-1 lg:-mx-1 xl:-mx-1	" id="Books"> </div>
</div>
          `;


  getSubjectBooks(SubjectData["Books"], 'Books');
}
function ImpMaterial(SubjectData) {

  pagediv.innerHTML += ` <div class="post-header"><div class="post-head"><h1 class="post-title entry-title" itemprop="name">IMP Material </h1></div></div><div class="container"><div class="row"><div class=""><div class="card card-margin"><div class="card-body border-2 "><div class="widget-49"><div class="widget-49-title-wrapper"><div class="widget-49-date-primary"><span class="widget-49-date-day">` + SubjectData.known_as + `</span></div><div class="widget-49-meeting-info"><span class="widget-49-pro-title">` + SubjectData.subject_name + `</span><span class="widget-49-meeting-time">` + SubjectData.subjecet_code + `</span></div></div><a href="` + SubjectData.imp_material + `"
class="btn btn-sm btn-flash-border-primary widget-49-meeting-action">View</a></div></div></div></div></div></div>`;

}
function SubjectPaperSolution(SubjectData) {

  pagediv.innerHTML += ` <div class="post-header"><div class="post-head"><h1 class="post-title entry-title" itemprop="name">Paper Solutions </h1></div></div><div class="container"><div class="row"><div class=""><div class="card card-margin"><div class="card-body border-2 "><div class="widget-49"><div class="widget-49-title-wrapper"><div class="widget-49-date-primary"><span class="widget-49-date-day">` + SubjectData.known_as + `</span></div><div class="widget-49-meeting-info"><span class="widget-49-pro-title">` + SubjectData.subject_name + `</span><span class="widget-49-meeting-time">` + SubjectData.subjecet_code + `</span></div></div><a href="` + SubjectData.paper_solution + `"
class="btn btn-sm btn-flash-border-primary widget-49-meeting-action">View</a></div></div></div></div></div></div>`;

}
function PrecticalAssignment(SubjectData) {

  pagediv.innerHTML += ` <div class="post-header"><div class="post-head"><h1 class="post-title entry-title" itemprop="name">Prectical / Assignment </h1></div></div><div class="container"><div class="row"><div class=""><div class="card card-margin"><div class="card-body border-2 "><div class="widget-49"><div class="widget-49-title-wrapper"><div class="widget-49-date-primary"><span class="widget-49-date-day">` + SubjectData.known_as + `</span></div><div class="widget-49-meeting-info"><span class="widget-49-pro-title">` + SubjectData.subject_name + `</span><span class="widget-49-meeting-time">` + SubjectData.subjecet_code + `</span></div></div><a href="` + SubjectData.assignments + `"
class="btn btn-sm btn-flash-border-primary widget-49-meeting-action">View</a></div></div></div></div></div></div>`;

}

// Print As PDF
function printSection() {
  var classname = '.post-body';
  var IdName = document.querySelector(classname).id;
  var getFullContent = document.body.innerHTML;
  var headerSection = document.getElementsByClassName("post-header")[0].innerHTML;
  var printsection = document.getElementById(IdName).innerHTML;
  document.body.innerHTML = headerSection
  document.body.innerHTML += printsection;
  window.print();
  document.body.innerHTML = getFullContent;
}
